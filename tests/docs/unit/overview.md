# 単体テスト仕様書

## 概要

単体テストでは、コマンドラインインターフェースの基本機能をテストします。データベースアクセスなどの外部依存を伴う複雑な機能は統合テストに委ねています。

## テスト対象

- コマンドラインインターフェースのヘルプ表示
- コマンドライン引数のパース処理
- 基本的な入力バリデーション

## テストファイル構成

- `tests/unit/test_objective_manual.py`: 目標コマンドの単体テスト

## テストケース詳細

### 1. 目標コマンド基本テスト (`TestObjectiveCommandsIndependent`)

#### 1.1 ヘルプ表示テスト

| テストケース | 説明 | 期待結果 |
|------------|------|---------|
| `test_objective_help` | 目標コマンド全体のヘルプを表示 | 正常終了し、各サブコマンドがヘルプに表示される |
| `test_list_help` | list サブコマンドのヘルプを表示 | 正常終了し、オプションが表示される |
| `test_show_help` | show サブコマンドのヘルプを表示 | 正常終了し、引数とオプションが表示される |
| `test_create_help` | create サブコマンドのヘルプを表示 | 正常終了し、引数とオプションが表示される |
| `test_update_help` | update サブコマンドのヘルプを表示 | 正常終了し、引数とオプションが表示される |
| `test_status_help` | status サブコマンドのヘルプを表示 | 正常終了し、引数が表示される |
| `test_delete_help` | delete サブコマンドのヘルプを表示 | 正常終了し、引数とオプションが表示される |

## 実装詳細

### セットアップ

```python
@pytest.fixture(autouse=True)
def setup(self):
    """各テストの前に実行されるセットアップ"""
    # テスト用のランナー
    self.runner = CliRunner()
    yield
```

### テスト実装パターン

```python
def test_command_help(self):
    """コマンドのヘルプ表示テスト"""
    # ヘルプコマンドを実行
    result = self.runner.invoke(app, ["command", "--help"])
    
    # 実行結果の検証
    assert result.exit_code == 0               # 正常終了
    assert "Expected Text" in result.stdout    # 期待される文字列が含まれる
```

## 今後の拡張予定

### バリデーションテスト
- 無効な引数を渡した場合のエラー処理テスト
- 必須オプションが不足している場合のエラー処理テスト

### 追加コマンドのテスト
- タスク関連コマンドの単体テスト
- プロセス関連コマンドの単体テスト

## 注意事項

1. 単体テストではデータベースアクセスをモックしていません
2. 複雑なモックが必要な場合は、統合テストで実際のデータベースを使用してテストする方針です
3. ヘルプテキストの検証は、表示言語に依存する可能性があるため、テストの国際化対応が必要になる場合があります 